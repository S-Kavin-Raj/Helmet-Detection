<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helmet Detection AI | Safety First</title>
    <meta name="description" content="AI-powered helmet detection system for motorcycle safety compliance">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

    <div class="bg-animation">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>


    <nav class="navbar">
        <div class="nav-brand">

            <span class="brand-text">Helmet<span class="highlight">AI</span></span>
        </div>
        <div class="nav-actions" style="display: flex; gap: 1rem; align-items: center;">
            <div class="nav-status">
                <span class="status-dot"></span>
                <span>Model Ready</span>
            </div>
            <div style="display:flex; align-items:center; gap:0.5rem;">
                <label
                    style="display:flex; align-items:center; gap:6px; font-size:0.875rem; cursor:pointer; color:var(--text-secondary);">
                    <input type="checkbox" id="annotatedCheckbox">
                    <span style="font-weight:600;">Server Annotated</span>
                </label>
            </div>
        </div>
    </nav>





    <header class="hero">
        <div class="hero-content">
            <div class="hero-badge">
                <span class="badge-icon">üõ°Ô∏è</span>
                <span>AI-Powered Safety Detection</span>
            </div>
            <h1 class="hero-title">
                Smart <span class="gradient-text">Helmet Detection</span>
                <br>for Road Safety
            </h1>
            <p class="hero-subtitle">
                Upload an image to instantly detect helmet compliance using
                advanced YOLO deep learning technology
            </p>
        </div>
    </header>


    <main class="container">

        <div class="mode-tabs" style="display: flex; gap: 1rem; margin-bottom: 2rem; justify-content: center;">
            <button class="mode-tab active" data-mode="image"
                style="padding: 0.75rem 2rem; background: var(--primary); color: white; border: none; border-radius: 100px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                üì∑ Image
            </button>
            <button class="mode-tab" data-mode="video"
                style="padding: 0.75rem 2rem; background: transparent; color: var(--text-secondary); border: 1px solid var(--border-color); border-radius: 100px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                üé• Video File
            </button>
            <button class="mode-tab" data-mode="webcam"
                style="padding: 0.75rem 2rem; background: transparent; color: var(--text-secondary); border: 1px solid var(--border-color); border-radius: 100px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                üìπ Live Webcam
            </button>
        </div>


        <section class="upload-section" id="uploadSection">
            <div class="upload-card glass-card">
                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14" />
                            <path d="M14 8h.01" />
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                        </svg>
                    </div>
                    <h3 class="upload-title" id="uploadTitle">Drop your image here</h3>
                    <p class="upload-subtitle">or click to browse</p>
                    <div class="upload-formats" id="uploadFormats">
                        <span>JPG</span>
                        <span>PNG</span>
                        <span>WEBP</span>
                    </div>
                    <input type="file" id="fileInput" accept="image/*" hidden>
                    <input type="file" id="videoInput" accept="video/*" hidden>
                </div>


                <div class="webcam-container" id="webcamContainer"
                    style="display: none; position: relative; border-radius: 20px; overflow: hidden; max-width: 100%;">
                    <video id="webcamVideo" autoplay playsinline
                        style="width: 100%; border-radius: 20px; display: block;"></video>
                    <canvas id="webcamCanvas" style="width: 100%; border-radius: 20px; display: none;"></canvas>
                    <div
                        style="position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 100px; color: white; font-weight: 600; backdrop-filter: blur(10px);">
                        <span
                            style="display: inline-block; width: 10px; height: 10px; background: #00ff00; border-radius: 50%; margin-right: 8px; animation: pulse 2s infinite;"></span>
                        LIVE
                    </div>
                    <button class="btn-stop-webcam" id="stopWebcamBtn"
                        style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--danger); color: white; border: none; padding: 12px 24px; border-radius: 100px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px;">
                        <svg viewBox="0 0 24 24" fill="currentColor" style="width: 20px; height: 20px;">
                            <rect x="6" y="6" width="12" height="12"></rect>
                        </svg>
                        Stop Camera
                    </button>
                </div>

                <div class="video-player-container" id="videoPlayerContainer"
                    style="display: none; position: relative; border-radius: 20px; overflow: hidden; max-width: 100%;">
                    <video id="videoPlayer" controls style="width: 100%; border-radius: 20px; display: block;"></video>
                    <canvas id="videoCanvas" style="width: 100%; border-radius: 20px; display: none;"></canvas>
                    <div
                        style="position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 100px; color: white; font-weight: 600; backdrop-filter: blur(10px);">
                        <span
                            style="display: inline-block; width: 10px; height: 10px; background: #ff9500; border-radius: 50%; margin-right: 8px;"></span>
                        VIDEO
                    </div>
                    <div
                        style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px;">
                        <button class="btn-toggle-video" id="toggleVideoBtn" onclick="toggleVideoProcessing()"
                            style="background: var(--accent-primary); color: white; border: none; padding: 12px 24px; border-radius: 100px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px;">
                            <svg viewBox="0 0 24 24" fill="currentColor" style="width: 20px; height: 20px;">
                                <polygon points="5,3 19,12 5,21"></polygon>
                            </svg>
                            Start Detection
                        </button>
                        <button class="btn-close-video" onclick="closeVideoPlayer()"
                            style="background: var(--danger); color: white; border: none; padding: 12px 24px; border-radius: 100px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 8px;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                style="width: 20px; height: 20px;">
                                <path d="M18 6L6 18M6 6l12 12" />
                            </svg>
                            Close
                        </button>
                    </div>
                </div>


                <div class="preview-container" id="previewContainer">
                    <img id="previewImage" src="" alt="Preview">
                    <div class="scanner-line"></div>
                    <button class="btn-clear" id="clearBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12" />
                        </svg>
                    </button>
                </div>


                <button class="btn-analyze" id="analyzeBtn" disabled>
                    <span class="btn-text">Analyze Image</span>
                    <span class="btn-loader"></span>
                    <svg class="btn-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        </section>


        <section class="results-section" id="resultsSection">
            <div class="results-header">
                <h2 class="section-title">Detection Results</h2>
                <div class="results-actions">
                    <button class="btn-download" id="downloadBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
                            <polyline points="7,10 12,15 17,10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        Download Report
                    </button>
                    <button class="btn-download" id="resetBtn"
                        style="margin-left: 10px; border-color: var(--accent-secondary); color: var(--accent-secondary);">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12" />
                            <path d="M3 3l0 9l9 0" />
                        </svg>
                        New Analysis
                    </button>
                </div>
            </div>


            <div class="stats-grid">
                <div class="stat-card glass-card">
                    <div class="stat-icon total">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value" id="totalCount">0</span>
                        <span class="stat-label">Total Detections</span>
                    </div>
                </div>

                <div class="stat-card glass-card safe">
                    <div class="stat-icon safe">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
                            <polyline points="22,4 12,14.01 9,11.01" />
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value" id="safeCount">0</span>
                        <span class="stat-label">With Helmet</span>
                    </div>
                </div>

                <div class="stat-card glass-card danger">
                    <div class="stat-icon danger">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="12" y1="8" x2="12" y2="12" />
                            <line x1="12" y1="16" x2="12.01" y2="16" />
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value" id="dangerCount">0</span>
                        <span class="stat-label">Without Helmet</span>
                    </div>
                </div>
            </div>


            <div class="result-image-container glass-card">
                <img id="resultImage" src="" alt="Detection Result">
            </div>


            <div class="detections-list glass-card" id="detectionsList">
                <h3 class="list-title">Detection Details</h3>
                <div class="detections-items" id="detectionsItems">

                </div>
            </div>
        </section>


        <section class="samples-section">
            <h2 class="section-title">Try Sample Images</h2>
            <p class="section-subtitle">Click on any image to test the detection</p>
            <div class="samples-grid" id="samplesGrid">

            </div>
        </section>
    </main>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="/static/webcam_support.js"></script>
    <script src="/static/script.js"></script>
</body>

</html>